import { collection, query, getDocs } from "firebase/firestore";
import { db } from "../firebase";
import { ListService } from "../types";
import { {{entityInterface}} } from "./types";

const list: ListService<{{entityInterface}}> = async (opts = {}) => {
  const collectionRef = collection(db, `/{{entityName}}`);
  const q =
    typeof opts.listQueryFn === "function"
      ? opts.listQueryFn(collectionRef)
      : query(collectionRef);
  const querySnapshot = await getDocs(q);
  return querySnapshot.docs.map((doc) => {
    return {
      ...doc.data(),
      id: doc.id,
    } as {{entityInterface}};
  });
};

export default list;